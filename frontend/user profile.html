<!-- profile.html -->
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>User Profile - CampusConnect</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* Reset and Base */
    * {
      margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif;
    }
    body {
      background: #f7faff;
      color: #1a1a2e;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 2em;
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    
    header {
      width: 100%; max-width: 1200px;
      background-color: #0f52ba; padding: 1em 2em;
      display: flex; justify-content: space-between; align-items: center;
      color: white; position: sticky; top: 0; z-index: 100;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: background-color 0.4s ease;
    }
    header h1 {
      font-weight: 700; font-size: 1.8rem; letter-spacing: 1px;
      cursor: pointer; user-select: none;
    }
    nav {
      display: flex; align-items: center;
    }
    nav a {
      font-weight: 600; margin-left: 2em; font-size: 1rem;
      color: white; text-decoration: none; transition: color 0.3s ease;
      cursor: pointer; user-select: none;
    }
    nav a:hover, nav a[aria-current="page"] {
      color: #ffb703; text-decoration: underline;
    }
    #darkModeToggle {
      margin-left: 2em; background: none; border: none;
      font-size: 1.4rem; cursor: pointer; color: white;
      user-select: none; transition: color 0.3s ease;
    }
    #darkModeToggle:hover {
      color: #ffd54f;
    }
    main {
      max-width: 1000px; width: 90%; margin-top: 2em;
      background: white; border-radius: 20px; padding: 3em 4em;
      box-shadow: 0 10px 40px rgba(15,82,186,0.18);
      animation: fadeInUp 0.9s cubic-bezier(0.3, 0, 0, 1) forwards;
      transition: background-color 0.4s ease, color 0.4s ease;
      overflow: hidden;
    }
    .profile-header {
      display: flex; align-items: center; gap: 3em; flex-wrap: wrap;
      margin-bottom: 3em;
    }
    .avatar-container {
      flex-shrink: 0; width: 160px; height: 160px;
      border-radius: 50%; overflow: hidden;
      box-shadow: 0 12px 40px rgba(15,82,186,0.4);
      cursor: pointer; transition: transform 0.5s ease, box-shadow 0.5s ease;
      perspective: 700px;
      will-change: transform;
    }
    .avatar-container:hover, .avatar-container:focus {
      outline: none;
      transform: rotateY(22deg) rotateX(15deg) scale(1.1);
      box-shadow: 0 20px 55px rgba(15,82,186,0.7);
    }
    .avatar-container img {
      width: 100%; height: 100%; object-fit: cover;
      transition: transform 0.6s ease;
      will-change: transform;
    }
    .profile-info h2 {
      font-weight: 800; font-size: 2.4rem; margin-bottom: 0.4em;
      color: #0f52ba; user-select: text;
      text-shadow: 1px 1px 3px rgba(15, 82, 186, 0.2);
    }
    .profile-info p {
      font-size: 1.2rem; line-height: 1.6; color: #484848;
      margin-bottom: 1.5em; user-select: text;
    }
    .skills {
      display: flex; flex-wrap: wrap; gap: 1em;
    }
    .skill-tag {
      background: linear-gradient(135deg, #d0daff, #a0b7fc);
      color: #0f52ba;
      padding: 0.6em 1.2em;
      border-radius: 20px;
      font-weight: 700;
      font-size: 1rem;
      text-shadow: 0 0 3px rgba(255 255 255 / 0.7);
      cursor: default;
      user-select: none;
      box-shadow:
          0 3px 12px rgba(15, 82, 186, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .skill-tag:hover, .skill-tag:focus {
      outline: none;
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(15, 82, 186, 0.5);
    }
    section.profile-section {
      margin-top: 4em;
    }
    section.profile-section h3 {
      font-weight: 800;
      font-size: 1.7rem;
      color: #0f52ba;
      border-bottom: 3px solid #0f52ba;
      padding-bottom: 0.5em;
      margin-bottom: 2em;
      user-select: text;
      text-shadow: 1px 1px 3px rgba(15,82,186,0.2);
    }
    ul.gig-list, ul.academic-list {
      list-style: none;
      padding-left: 0;
      user-select: text;
    }
    ul.gig-list li, ul.academic-list li {
      padding: 1.5em 1.5em;
      margin-bottom: 1.3em;
      background: linear-gradient(135deg, #f0f6ff, #c5d9ff);
      border-radius: 18px;
      box-shadow: inset 0 0 12px rgba(15, 82, 186, 0.1);
      cursor: pointer;
      transition: background 0.4s ease, box-shadow 0.4s ease;
      user-select: text;
      font-weight: 700;
      font-size: 1.1rem;
      color: #0f52ba;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1.5px solid transparent;
    }
    ul.gig-list li:hover, ul.academic-list li:hover, ul.gig-list li:focus-visible, ul.academic-list li:focus-visible {
      background: linear-gradient(135deg, #c2d3ff, #4173ff);
      box-shadow: inset 0 0 25px rgba(15, 82, 186, 0.3);
      color: white;
      outline: none;
      border-color: #295af5;
    }
    ul.gig-list li span, ul.academic-list li span {
      user-select: text;
      font-weight: 800;
      font-size: 1.15rem;
    }
    ul.gig-list li .price {
      font-weight: 700;
      font-size: 1.2rem;
      filter: drop-shadow(0 0 1px rgba(0,0,0,0.15));
      user-select: text;
    }
    /* Gamification */
    #gamification {
      margin-top: 4em;
      background: linear-gradient(135deg, #dbe7ff, #a3b9ff);
      border-radius: 20px;
      padding: 2em 3em;
      box-shadow: 0 12px 35px rgba(15, 82, 186, 0.25);
      transition: background-color 0.4s ease, color 0.4s ease;
      user-select: text;
      text-align: center;
    }
    #gamification h3, #gamification h4 {
      font-weight: 800; color: #0f52ba;
      margin-bottom: 1.1em;
      text-shadow: 1px 1px 3px rgba(15, 82, 186, 0.2);
    }
    .badge {
      display: inline-block;
      background: #ffb703;
      color: #1a1a2e;
      padding: 0.6em 1.4em;
      margin: 0 1em 0.8em 1em;
      border-radius: 40px;
      font-weight: 700;
      font-size: 1.15rem;
      box-shadow: 0 8px 20px rgba(251, 183, 3, 0.75);
      cursor: default;
      user-select: none;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .badge:hover, .badge:focus {
      outline: none;
      transform: scale(1.1) translateY(-5px);
      box-shadow: 0 15px 35px rgba(251, 183, 3, 1);
    }
    /* Recommendations */
    #recommendations-section {
      margin-top: 4em;
    }
    #recommendations-section h3 {
      font-weight: 800;
      font-size: 1.7rem;
      color: #0f52ba;
      border-bottom: 3px solid #0f52ba;
      padding-bottom: 0.6em;
      margin-bottom: 2em;
      user-select: text;
      text-shadow: 1px 1px 3px rgba(15, 82, 186, 0.2);
    }
    #recommendations {
      display: flex;
      flex-direction: column;
      gap: 1.5em;
      user-select: none;
    }
    .recommendation-card {
      background: linear-gradient(135deg, #e0ecff, #a0bafc);
      color: #0f52ba;
      padding: 1.4em 2em;
      border-radius: 30px;
      font-weight: 700;
      font-size: 1.25rem;
      box-shadow: 0 8px 25px rgba(15, 82, 186, 0.3);
      cursor: pointer;
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      display: flex;
      justify-content: space-between;
      align-items: center;
      user-select: none;
      perspective: 900px;
    }
    .recommendation-card:hover, .recommendation-card:focus-visible {
      outline: none;
      transform: rotateX(18deg) translateY(-12px);
      box-shadow: 0 18px 60px rgba(15,82,186,0.6);
    }
    .recommendation-card .price {
      font-weight: 800;
      font-size: 1.2rem;
      filter: drop-shadow(0 0 1px rgba(0,0,0,0.2));
      user-select: text;
    }
    /* Footer */
    footer {
      margin-top: auto;
      width: 100%;
      background-color: #0f52ba;
      color: white;
      padding: 2em 2em 2em;
      text-align: center;
      font-size: 0.9rem;
      box-shadow: 0 -5px 15px rgba(0,0,0,0.18);
      user-select: none;
    }
    /* Animations */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* Dark Mode */
    body.dark-mode {
      background: #121212 !important;
      color: #e0e0e0 !important;
    }
    body.dark-mode header {
      background-color: #222 !important;
    }
    body.dark-mode main {
      background: #1e1e1e !important;
      color: #e0e0e0 !important;
      box-shadow: 0 12px 40px rgba(255, 255, 255, 0.07);
    }
    body.dark-mode ul.gig-list li, body.dark-mode ul.academic-list li {
      background: #222 !important;
      box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.18) !important;
      color: #ffb703 !important;
    }
    body.dark-mode ul.gig-list li:hover, body.dark-mode ul.academic-list li:hover {
      background: #333 !important;
      box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.3) !important;
    }
    body.dark-mode .skill-tag {
      background: #222 !important;
      color: #ffb703 !important;
    }
    body.dark-mode #gamification {
      background: linear-gradient(135deg, #323232, #1f1f58) !important;
      color: #ffb703 !important;
      box-shadow: 0 12px 40px rgba(255, 183, 3, 0.8) !important;
    }
    body.dark-mode .badge {
      background: #333 !important;
      color: #ffb703 !important;
      box-shadow: 0 10px 30px rgba(255, 183, 3, 1) !important;
    }
    body.dark-mode #recommendations-section h3 {
      color: #ffb703 !important;
      border-color: #ffb703 !important;
      text-shadow: 1px 1px 4px rgba(255, 183, 3, 0.8) !important;
    }
    body.dark-mode .recommendation-card {
      background: #222 !important;
      color: #ffb703 !important;
      border: 1.5px solid #444 !important;
      box-shadow: 0 10px 35px rgba(255, 183, 3, 0.5) !important;
    }
    body.dark-mode .recommendation-card:hover, body.dark-mode .recommendation-card:focus-visible {
      box-shadow: 0 20px 60px rgba(255, 183, 3, 0.9) !important;
    }
    /* Responsive */
    @media (max-width: 900px) {
      main {
        padding: 2em 2em;
      }
      .profile-header {
        flex-direction: column;
        text-align: center;
      }
    }
    @media (max-width: 520px) {
      main {
        padding: 1.8em 1.5em;
      }
      .profile-info h2 {
        font-size: 1.9rem;
      }
      .recommendation-card {
        font-size: 1rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.7em;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1 onclick="location.href='landing.html'">CampusConnect</h1>
    <nav>
      <a href="landing.html">Home</a>
      <a href="gig-listings.html">Gigs</a>
      <a href="community.html">Community</a>
      <a href="profile.html" aria-current="page" style="text-decoration: underline;">Profile</a>
      <a href="payment.html">Payment</a>
      <a href="login.html">Login</a>
      <button id="darkModeToggle" aria-label="Toggle dark mode" title="Toggle dark mode">🌙</button>
    </nav>
  </header>

  <main role="main" aria-label="User profile main content">
    <div class="profile-header">
      <div class="avatar-container" tabindex="0" aria-label="User avatar">
        <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="User Avatar" />
      </div>
      <div class="profile-info">
        <h2>John Doe</h2>
        <p>Computer Science Student | Freelance Web Developer</p>
        <div class="skills" aria-label="User skills and expertise">
          <span class="skill-tag">JavaScript</span>
          <span class="skill-tag">React</span>
          <span class="skill-tag">Node.js</span>
          <span class="skill-tag">UI/UX Design</span>
        </div>
      </div>
    </div>

    <section class="profile-section" aria-labelledby="gigs-title" tabindex="0">
      <h3 id="gigs-title">Active Freelance Gigs</h3>
      <ul class="gig-list" aria-label="List of user freelance gigs">
        <li tabindex="0"><span>Website Redesign</span> <span class="price">₹300</span></li>
        <li tabindex="0"><span>Mobile App UI</span> design for startup <span class="price">₹500</span></li>
        <li tabindex="0"><span>Blog Platform</span> development <span class="price">₹250</span></li>
      </ul>
    </section>

    <section class="profile-section" aria-labelledby="academic-title" tabindex="0">
      <h3 id="academic-title">Academic Projects & Clubs</h3>
      <ul class="academic-list" aria-label="List of academic projects and clubs">
        <li tabindex="0"><span>AI Research Group</span> - Lead Developer</li>
        <li tabindex="0"><span>Programming Club</span> - Member</li>
        <li tabindex="0"><span>College Newsletter</span> - Contributor</li>
      </ul>
    </section>

    <section id="recommendations-section" aria-labelledby="recommendations-title">
      <h3 id="recommendations-title">Recommended Gigs for You</h3>
      <div id="recommendations" style="margin-bottom: 2em"></div>
    </section>

    <section id="gamification">
      <h3>Your Level: <span id="userLevel">1</span></h3>
      <h4>Points Earned: <span id="userPoints">0</span></h4>
      <div id="badges"></div>
    </section>
  </main>

  <footer>
    &copy; 2025 CampusConnect. All rights reserved.
  </footer>

  <script>
    // Format INR currency with commas
    function formatINR(amount) {
      return new Intl.NumberFormat('en-IN', {
        style: 'currency',
        currency: 'INR',
        minimumFractionDigits: 0,
      }).format(amount);
    }

    // Gamification Demo Logic
    function updateGamification(points) {
      document.getElementById("userPoints").textContent = points;
      document.getElementById("userLevel").textContent =
        Math.floor(points / 100) + 1;

      let b = document.getElementById("badges");
      b.innerHTML = "";
      if (points >= 100) b.innerHTML += '<span class="badge">Certified Pro</span>';
      if (points >= 300)
        b.innerHTML += '<span class="badge">Community Star</span>';
    }
    updateGamification(250); // Replace 250 with user's actual points

    // AI Recommendations Logic (calls backend)
    function fetchRecommendations(userSkills) {
      fetch("http://localhost:3000/api/recommendations/gigs", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ skills: userSkills }),
      })
        .then((res) => res.json())
        .then((data) => {
          const gigs = data.recommendations,
            container = document.getElementById("recommendations");
          container.innerHTML = "";
          if (!gigs.length) {
            container.innerHTML =
              '<div class="recommendation-card">No matches found. Try updating your skills!</div>';
          }
          gigs.forEach((gig) => {
            const div = document.createElement("div");
            div.textContent = `${gig.title}`;
            div.className = "recommendation-card";
            // Optional: show price if available e.g. ₹500
            if (gig.price) {
              const priceSpan = document.createElement("span");
              priceSpan.textContent = formatINR(gig.price);
              priceSpan.className = "price";
              div.appendChild(priceSpan);
            }
            container.appendChild(div);
          });
        });
    }
    // Use user's real skills here in production
    fetchRecommendations(["React", "JavaScript"]);

    // Dark Mode Toggle
    const darkModeToggle = document.getElementById("darkModeToggle");
    function applyDarkMode(enabled) {
      if (enabled) {
        document.body.classList.add("dark-mode");
        localStorage.setItem("darkMode", "enabled");
      } else {
        document.body.classList.remove("dark-mode");
        localStorage.setItem("darkMode", "disabled");
      }
    }
    darkModeToggle.addEventListener("click", () => {
      const enabled = document.body.classList.contains("dark-mode");
      applyDarkMode(!enabled);
    });
    if (localStorage.getItem("darkMode") === "enabled") applyDarkMode(true);
  </script>
</body>
</html>
